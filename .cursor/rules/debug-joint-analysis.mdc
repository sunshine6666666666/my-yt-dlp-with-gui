---
description: 在调试模式下强制执行 debug.log 与 app.log 的联合分析
globs: 
alwaysApply: true
---

# 调试模式联合日志分析规约

当处于 **DEBUG MODE** (调试模式) 时，为了确保故障诊断的准确性与严密性，必须遵循以下执行准则：

## 1. 强制联合读取
在用户执行完复现动作（reproduction steps）并确认后，Agent 必须同时读取以下两份日志：
- **运行时插桩日志**：`.cursor/debug.log` (记录高细粒度的代码执行流、变量状态、函数进入/退出)
- **业务逻辑日志**：`yt-dlp-gui/logs/app.log` (记录业务层级的 INFO/ERROR 信息、subprocess 原始输出、UI 关键点击)

## 2. 交叉验证流程
分析过程必须包含以下维度：
- **时间线对齐**：按时间戳顺序将两份日志中的事件进行排序，还原完整的“UI -> Queue -> Downloader -> OS Process”链路。
- **证据互补**：使用 `app.log` 确认业务是否成功（如：`Process finished with code 0`），使用 `debug.log` 确认代码细节（如：刷新时选中状态是否正确保存/恢复）。
- **零猜测诊断**：所有关于故障原因的结论必须同时引用两份日志中的相关行作为证据。

## 3. 分析报告标准
在给出的分析回复中，必须明确标注：
- [证据来源: debug.log]: 关键行内容
- [证据来源: app.log]: 关键行内容
- [联合结论]: 基于上述证据的判定结果

## 4. 严禁行为
- ❌ 禁止在未读取 `app.log` 的情况下仅凭 `debug.log` 的插桩数据下结论。
- ❌ 禁止在用户复现后直接进行代码修改，而不先输出日志审计报告。
- ❌ 禁止使用绝对路径引用业务日志，统一使用相对于项目根目录的地址：`yt-dlp-gui/logs/app.log`。
